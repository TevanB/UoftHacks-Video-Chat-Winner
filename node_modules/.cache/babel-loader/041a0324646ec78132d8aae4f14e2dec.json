{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/tevb/Documents/uofthacks/proj/Uofthacks2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/tevb/Documents/uofthacks/proj/Uofthacks2021/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState,useCallback}from'react';import Call from'../Call/Call';import StartButton from'../StartButton/StartButton';import api from'../../api';import{useLocation,Switch}from'react-router-dom';import AppRoute from'../utils/AppRoute';import Home from'../views/Home';import LayoutDefault from'../layouts/LayoutDefault';import'./App.css';import Tray from'../Tray/Tray';import CallObjectContext from'../../CallObjectContext';import{roomUrlFromPageUrl,pageUrlFromRoomUrl}from'../../urlUtils';import DailyIframe from'@daily-co/daily-js';import{logDailyEvent}from'../../logUtils';import ScrollReveal from'../utils/ScrollReveal';import ReactGA from'react-ga';import'../../assets/scss/style.scss';var STATE_IDLE='STATE_IDLE';var STATE_CREATING='STATE_CREATING';var STATE_JOINING='STATE_JOINING';var STATE_JOINED='STATE_JOINED';var STATE_LEAVING='STATE_LEAVING';var STATE_ERROR='STATE_ERROR';var trackPage=function trackPage(page){ReactGA.set({page:page});ReactGA.pageview(page);};var App=function App(){var _useState=useState(STATE_IDLE),_useState2=_slicedToArray(_useState,2),appState=_useState2[0],setAppState=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),roomUrl=_useState4[0],setRoomUrl=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),callObject=_useState6[0],setCallObject=_useState6[1];/**\n   * Creates a new call room.\n   */var createCall=useCallback(function(){setAppState(STATE_CREATING);return api.createRoom().then(function(room){return room.url;}).catch(function(error){console.log('Error creating room',error);setRoomUrl(null);setAppState(STATE_IDLE);});},[]);/**\n   * Starts joining an existing call.\n   *\n   * NOTE: In this demo we show how to completely clean up a call with destroy(),\n   * which requires creating a new call object before you can join() again.\n   * This isn't strictly necessary, but is good practice when you know you'll\n   * be done with the call object for a while and you're no longer listening to its\n   * events.\n   */var startJoiningCall=useCallback(function(url){var newCallObject=DailyIframe.createCallObject();setRoomUrl(url);setCallObject(newCallObject);setAppState(STATE_JOINING);newCallObject.join({url:url});},[]);/**\n   * Starts leaving the current call.\n   */var startLeavingCall=useCallback(function(){if(!callObject)return;// If we're in the error state, we've already \"left\", so just clean up\nif(appState===STATE_ERROR){callObject.destroy().then(function(){setRoomUrl(null);setCallObject(null);setAppState(STATE_IDLE);});}else{setAppState(STATE_LEAVING);callObject.leave();}},[callObject,appState]);/**\n   * If a room's already specified in the page's URL when the component mounts,\n   * join the room.\n   */useEffect(function(){var url=roomUrlFromPageUrl();url&&startJoiningCall(url);},[startJoiningCall]);/**\n   * Update the page's URL to reflect the active call when roomUrl changes.\n   *\n   * This demo uses replaceState rather than pushState in order to avoid a bit\n   * of state-management complexity. See the comments around enableCallButtons\n   * and enableStartButton for more information.\n   */useEffect(function(){var pageUrl=pageUrlFromRoomUrl(roomUrl);if(pageUrl===window.location.href)return;window.history.replaceState(null,null,pageUrl);},[roomUrl]);/**\n   * Uncomment to attach call object to window for debugging purposes.\n   */ // useEffect(() => {\n//   window.callObject = callObject;\n// }, [callObject]);\n/**\n   * Update app state based on reported meeting state changes.\n   *\n   * NOTE: Here we're showing how to completely clean up a call with destroy().\n   * This isn't strictly necessary between join()s, but is good practice when\n   * you know you'll be done with the call object for a while and you're no\n   * longer listening to its events.\n   */useEffect(function(){if(!callObject)return;var events=['joined-meeting','left-meeting','error'];function handleNewMeetingState(event){event&&logDailyEvent(event);switch(callObject.meetingState()){case'joined-meeting':setAppState(STATE_JOINED);break;case'left-meeting':callObject.destroy().then(function(){setRoomUrl(null);setCallObject(null);setAppState(STATE_IDLE);});break;case'error':setAppState(STATE_ERROR);break;default:break;}}// Use initial state\nhandleNewMeetingState();// Listen for changes in state\nfor(var _i=0,_events=events;_i<_events.length;_i++){var event=_events[_i];callObject.on(event,handleNewMeetingState);}// Stop listening for changes in state\nreturn function cleanup(){var _iterator=_createForOfIteratorHelper(events),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _event=_step.value;callObject.off(_event,handleNewMeetingState);}}catch(err){_iterator.e(err);}finally{_iterator.f();}};},[callObject]);/**\n   * Listen for app messages from other call participants.\n   */useEffect(function(){if(!callObject){return;}function handleAppMessage(event){if(event){logDailyEvent(event);console.log(\"received app message from \".concat(event.fromId,\": \"),event.data);}}callObject.on('app-message',handleAppMessage);return function cleanup(){callObject.off('app-message',handleAppMessage);};},[callObject]);/**\n   * Show the call UI if we're either joining, already joined, or are showing\n   * an error.\n   */var showCall=[STATE_JOINING,STATE_JOINED,STATE_ERROR].includes(appState);/**\n   * Only enable the call buttons (camera toggle, leave call, etc.) if we're joined\n   * or if we've errored out.\n   *\n   * !!!\n   * IMPORTANT: calling callObject.destroy() *before* we get the \"joined-meeting\"\n   * can result in unexpected behavior. Disabling the leave call button\n   * until then avoids this scenario.\n   * !!!\n   */var enableCallButtons=[STATE_JOINED,STATE_ERROR].includes(appState);/**\n   * Only enable the start button if we're in an idle state (i.e. not creating,\n   * joining, etc.).\n   *\n   * !!!\n   * IMPORTANT: only one call object is meant to be used at a time. Creating a\n   * new call object with DailyIframe.createCallObject() *before* your previous\n   * callObject.destroy() completely finishes can result in unexpected behavior.\n   * Disabling the start button until then avoids that scenario.\n   * !!!\n   */var enableStartButton=appState===STATE_IDLE;var childRef=useRef();var location=useLocation();useEffect(function(){var page=location.pathname;document.body.classList.add('is-loaded');childRef.current.init();trackPage(page);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[location]);return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(ScrollReveal,{ref:childRef,children:function children(){return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(AppRoute,{exact:true,path:\"/\",component:function component(){return/*#__PURE__*/React.createElement(Home,{showCall:showCall,createCall:createCall,startJoiningCall:startJoiningCall,enableStartButton:enableStartButton});}}));}}),showCall?/*#__PURE__*/ // NOTE: for an app this size, it's not obvious that using a Context\n// is the best choice. But for larger apps with deeply-nested components\n// that want to access call object state and bind event listeners to the\n// call object, this can be a helpful pattern.\nReact.createElement(CallObjectContext.Provider,{value:callObject},/*#__PURE__*/React.createElement(Call,{roomUrl:roomUrl}),/*#__PURE__*/React.createElement(Tray,{disabled:!enableCallButtons,onClickLeaveCall:startLeavingCall})):/*#__PURE__*/React.createElement(\"div\",null));};export default App;","map":{"version":3,"sources":["/Users/tevb/Documents/uofthacks/proj/Uofthacks2021/src/components/App/App.js"],"names":["React","useRef","useEffect","useState","useCallback","Call","StartButton","api","useLocation","Switch","AppRoute","Home","LayoutDefault","Tray","CallObjectContext","roomUrlFromPageUrl","pageUrlFromRoomUrl","DailyIframe","logDailyEvent","ScrollReveal","ReactGA","STATE_IDLE","STATE_CREATING","STATE_JOINING","STATE_JOINED","STATE_LEAVING","STATE_ERROR","trackPage","page","set","pageview","App","appState","setAppState","roomUrl","setRoomUrl","callObject","setCallObject","createCall","createRoom","then","room","url","catch","error","console","log","startJoiningCall","newCallObject","createCallObject","join","startLeavingCall","destroy","leave","pageUrl","window","location","href","history","replaceState","events","handleNewMeetingState","event","meetingState","on","cleanup","off","handleAppMessage","fromId","data","showCall","includes","enableCallButtons","enableStartButton","childRef","pathname","document","body","classList","add","current","init"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport Call from '../Call/Call';\nimport StartButton from '../StartButton/StartButton';\nimport api from '../../api';\nimport { useLocation, Switch } from 'react-router-dom';\nimport AppRoute from '../utils/AppRoute';\nimport Home from '../views/Home';\nimport LayoutDefault from '../layouts/LayoutDefault';\nimport './App.css';\nimport Tray from '../Tray/Tray';\nimport CallObjectContext from '../../CallObjectContext';\nimport { roomUrlFromPageUrl, pageUrlFromRoomUrl } from '../../urlUtils';\nimport DailyIframe from '@daily-co/daily-js';\nimport { logDailyEvent } from '../../logUtils';\nimport ScrollReveal from '../utils/ScrollReveal';\nimport ReactGA from 'react-ga';\nimport '../../assets/scss/style.scss';\n\n\nconst STATE_IDLE = 'STATE_IDLE';\nconst STATE_CREATING = 'STATE_CREATING';\nconst STATE_JOINING = 'STATE_JOINING';\nconst STATE_JOINED = 'STATE_JOINED';\nconst STATE_LEAVING = 'STATE_LEAVING';\nconst STATE_ERROR = 'STATE_ERROR';\nconst trackPage = page => {\n  ReactGA.set({ page });\n  ReactGA.pageview(page);\n};\nconst  App = () => {\n  const [appState, setAppState] = useState(STATE_IDLE);\n  const [roomUrl, setRoomUrl] = useState(null);\n  const [callObject, setCallObject] = useState(null);\n\n  /**\n   * Creates a new call room.\n   */\n  const createCall = useCallback(() => {\n    setAppState(STATE_CREATING);\n    return api\n      .createRoom()\n      .then((room) => room.url)\n      .catch((error) => {\n        console.log('Error creating room', error);\n        setRoomUrl(null);\n        setAppState(STATE_IDLE);\n      });\n  }, []);\n\n  /**\n   * Starts joining an existing call.\n   *\n   * NOTE: In this demo we show how to completely clean up a call with destroy(),\n   * which requires creating a new call object before you can join() again.\n   * This isn't strictly necessary, but is good practice when you know you'll\n   * be done with the call object for a while and you're no longer listening to its\n   * events.\n   */\n  const startJoiningCall = useCallback((url) => {\n    const newCallObject = DailyIframe.createCallObject();\n    setRoomUrl(url);\n    setCallObject(newCallObject);\n    setAppState(STATE_JOINING);\n    newCallObject.join({ url });\n  }, []);\n\n  /**\n   * Starts leaving the current call.\n   */\n  const startLeavingCall = useCallback(() => {\n    if (!callObject) return;\n    // If we're in the error state, we've already \"left\", so just clean up\n    if (appState === STATE_ERROR) {\n      callObject.destroy().then(() => {\n        setRoomUrl(null);\n        setCallObject(null);\n        setAppState(STATE_IDLE);\n      });\n    } else {\n      setAppState(STATE_LEAVING);\n      callObject.leave();\n    }\n  }, [callObject, appState]);\n\n  /**\n   * If a room's already specified in the page's URL when the component mounts,\n   * join the room.\n   */\n  useEffect(() => {\n    const url = roomUrlFromPageUrl();\n    url && startJoiningCall(url);\n  }, [startJoiningCall]);\n\n  /**\n   * Update the page's URL to reflect the active call when roomUrl changes.\n   *\n   * This demo uses replaceState rather than pushState in order to avoid a bit\n   * of state-management complexity. See the comments around enableCallButtons\n   * and enableStartButton for more information.\n   */\n  useEffect(() => {\n    const pageUrl = pageUrlFromRoomUrl(roomUrl);\n    if (pageUrl === window.location.href) return;\n    window.history.replaceState(null, null, pageUrl);\n  }, [roomUrl]);\n\n  /**\n   * Uncomment to attach call object to window for debugging purposes.\n   */\n  // useEffect(() => {\n  //   window.callObject = callObject;\n  // }, [callObject]);\n\n  /**\n   * Update app state based on reported meeting state changes.\n   *\n   * NOTE: Here we're showing how to completely clean up a call with destroy().\n   * This isn't strictly necessary between join()s, but is good practice when\n   * you know you'll be done with the call object for a while and you're no\n   * longer listening to its events.\n   */\n  useEffect(() => {\n    if (!callObject) return;\n\n    const events = ['joined-meeting', 'left-meeting', 'error'];\n\n    function handleNewMeetingState(event) {\n      event && logDailyEvent(event);\n      switch (callObject.meetingState()) {\n        case 'joined-meeting':\n          setAppState(STATE_JOINED);\n          break;\n        case 'left-meeting':\n          callObject.destroy().then(() => {\n            setRoomUrl(null);\n            setCallObject(null);\n            setAppState(STATE_IDLE);\n          });\n          break;\n        case 'error':\n          setAppState(STATE_ERROR);\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Use initial state\n    handleNewMeetingState();\n\n    // Listen for changes in state\n    for (const event of events) {\n      callObject.on(event, handleNewMeetingState);\n    }\n\n    // Stop listening for changes in state\n    return function cleanup() {\n      for (const event of events) {\n        callObject.off(event, handleNewMeetingState);\n      }\n    };\n  }, [callObject]);\n\n  /**\n   * Listen for app messages from other call participants.\n   */\n  useEffect(() => {\n    if (!callObject) {\n      return;\n    }\n\n    function handleAppMessage(event) {\n      if (event) {\n        logDailyEvent(event);\n        console.log(`received app message from ${event.fromId}: `, event.data);\n      }\n    }\n\n    callObject.on('app-message', handleAppMessage);\n\n    return function cleanup() {\n      callObject.off('app-message', handleAppMessage);\n    };\n  }, [callObject]);\n\n \n\n  /**\n   * Show the call UI if we're either joining, already joined, or are showing\n   * an error.\n   */\n  const showCall = [STATE_JOINING, STATE_JOINED, STATE_ERROR].includes(\n    appState\n  );\n\n  /**\n   * Only enable the call buttons (camera toggle, leave call, etc.) if we're joined\n   * or if we've errored out.\n   *\n   * !!!\n   * IMPORTANT: calling callObject.destroy() *before* we get the \"joined-meeting\"\n   * can result in unexpected behavior. Disabling the leave call button\n   * until then avoids this scenario.\n   * !!!\n   */\n  const enableCallButtons = [STATE_JOINED, STATE_ERROR].includes(appState);\n\n  /**\n   * Only enable the start button if we're in an idle state (i.e. not creating,\n   * joining, etc.).\n   *\n   * !!!\n   * IMPORTANT: only one call object is meant to be used at a time. Creating a\n   * new call object with DailyIframe.createCallObject() *before* your previous\n   * callObject.destroy() completely finishes can result in unexpected behavior.\n   * Disabling the start button until then avoids that scenario.\n   * !!!\n   */\n  const enableStartButton = appState === STATE_IDLE;\n\n  const childRef = useRef();\n  let location = useLocation();\n  useEffect(() => {\n    const page = location.pathname;\n    document.body.classList.add('is-loaded')\n    childRef.current.init();\n    trackPage(page);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n  return (\n    <div className=\"app\">\n      \n      <ScrollReveal\n      ref={childRef}\n      children={() => (\n        <Switch>\n          <AppRoute exact path=\"/\" \n          component={()=>{\n             return <Home showCall={showCall} createCall={createCall} startJoiningCall={startJoiningCall} enableStartButton={enableStartButton}/>\n          }}\n          />\n        </Switch>\n      )} />\n\n      {showCall ? (\n        // NOTE: for an app this size, it's not obvious that using a Context\n        // is the best choice. But for larger apps with deeply-nested components\n        // that want to access call object state and bind event listeners to the\n        // call object, this can be a helpful pattern.\n        <CallObjectContext.Provider value={callObject}>\n          <Call roomUrl={roomUrl} />\n          <Tray\n            disabled={!enableCallButtons}\n            onClickLeaveCall={startLeavingCall}\n          />\n        </CallObjectContext.Provider>\n      ):(\n        <div></div>\n      )\n    }\n    </div>\n  );\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}